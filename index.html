<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="index.js"></script>
    <script>
        function printName()  {
    const num = document.getElementById('name').value;
    montyHallSimulation(num);
}

document.addEventListener('DOMContentLoaded', () => {
    const buttons = document.querySelectorAll('.btn');
    buttons.forEach(button => {
        button.addEventListener('click', () => {
            const num = button.textContent;
            montyHallSimulation(num)
        });
    });
});
count =0
document.addEventListener('DOMContentLoaded', () => {
    const buttons = document.querySelectorAll('.reset');
    buttons.forEach(button => {
        button.addEventListener('click', () => {
            for(let i = 1; i<13;i++){
            document.getElementById(`log${i}`).innerText = `기록 없음`;
            count = 0;
            }
        });
    });
});


function montyHallSimulation(trials) {
    let switchWins = 0;
    let stayWins = 0;

    for (let i = 0; i < trials; i++) {
      const carDoor = Math.floor(Math.random() * 3);

      const initialChoice = Math.floor(Math.random() * 3);

    let openDoor;
    do {
        openDoor = Math.floor(Math.random() * 3);
    } while (openDoor === carDoor || openDoor === initialChoice);

    const switchChoice = [0, 1, 2].find(door => door !== initialChoice && door !== openDoor);

    const stayChoice = initialChoice;

    if (switchChoice === carDoor) {
        switchWins++;
    }

    if (stayChoice === carDoor) {
        stayWins++;
    }
    }
    count = count + 1;
    document.getElementById("stay").innerText = `바꾸었을때의 경우의 수 : ${switchWins}`;
    document.getElementById("change").innerText = `바꾸지 않았을때의 경우의 수 : ${stayWins}`;
    document.getElementById("staypercent").innerText =`바꾸었을 때의 경우의 수 : ${(switchWins / trials * 100).toFixed(2)}%`;
    document.getElementById("changepercent").innerText = `바꾸지 않았을때의 경우의 수 : ${(stayWins / trials * 100).toFixed(2)}%`;
    if(count === 13){
        count = 1
    }
    console.log(`log${count}`)
    document.getElementById(`log${count}`).innerText = `${count}번째 기록 : ${(switchWins / trials * 100).toFixed(2)}%(12번의 기록 이후에 초기화 됩니다)`
    console.log(`Trials: ${trials}`);
    console.log(`Switch Wins: ${switchWins} (${(switchWins / trials * 100).toFixed(2)}%)`);
    console.log(`Stay Wins: ${stayWins} (${(stayWins / trials * 100).toFixed(2)}%`);
}


    </script>
    <title>Document</title>
</head>
<body>
    <input id='name' onchange='printName()'/>
    <button class="btn">1</button>
    <button class="btn">10</button>
    <button class="btn">100</button>
    <button class="btn">1000</button>
    <button class="btn">10000</button>
    <button class="btn">100000</button>
    <button class="btn">1000000</button>
    <button class="reset">reset</button>
    
    <div id='stay'>바꾸었을 때의 경우의 수</div>
    <div id="change">바꾸지 않았을 때의 경우의 수</div>
    <div id='staypercent'>바꾸었을 때의 경우의 수</div>
    <div id="changepercent">바꾸지 않았을 때의 경우의 수</div>

    <div id="log1">기록 없음</div>
    <div id="log2">기록 없음</div>
    <div id="log3">기록 없음</div>
    <div id="log4">기록 없음</div>
    <div id="log5">기록 없음</div>
    <div id="log6">기록 없음</div>
    <div id="log7">기록 없음</div>
    <div id="log8">기록 없음</div>
    <div id="log9">기록 없음</div>
    <div id="log10">기록 없음</div>
    <div id="log11">기록 없음</div>
    <div id="log12">기록 없음</div>

</body>
</html>
